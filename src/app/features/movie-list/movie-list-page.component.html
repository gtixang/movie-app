<section>
  <app-search-form [model]="searchTerm" />
</section>

<section class="movies-section">
  <ng-container
    *ngrxLet="{
      movies: movies$,
      status: status$,
    } as vm"
  >
    @switch (vm.status) {
      @case ('loading') {
        <mat-spinner></mat-spinner>
      }
      @case ('loaded') {
        <ul class="movies-section__grid movie-grid" role="list">
          @for (m of vm.movies; track m.id) {
            <li>
              <app-movie-card [movie]="m"></app-movie-card>
            </li>
          }
        </ul>
      }
      @case ('error') {
        <p class="movies-section__error-message" role="alert">
          Произошла ошибка при загрузке данных.
        </p>
      }
      @default {
        <p class="movies-section__empty-message">Ничего не найдено.</p>
      }
    }
  </ng-container>
</section>
